{"version":3,"file":"SingleBlogPost-EtrFkQz-.js","sources":["../../src/components/SingleBlogPost.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport BlogPost from \"./BlogPost\";\r\nimport Navbar from \"./Navbar\";\r\n\r\nconst SingleBlogPost = ({\r\n  isAuthenticated,\r\n  userRole,\r\n  userEmail,\r\n  setIsAuthenticated,\r\n}) => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [blog, setBlog] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadBlog = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const blogs = JSON.parse(localStorage.getItem(\"blogs\") || \"[]\");\r\n        const foundBlog = blogs.find((b) => b.id === id);\r\n        if (foundBlog) {\r\n          setBlog(foundBlog);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error loading blog:\", error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadBlog();\r\n  }, [id]);\r\n\r\n  const handleDeleteBlog = (blogId) => {\r\n    if (window.confirm(\"Are you sure you want to delete this blog post?\")) {\r\n      try {\r\n        const blogs = JSON.parse(localStorage.getItem(\"blogs\") || \"[]\");\r\n        const updatedBlogs = blogs.filter((b) => b.id !== blogId);\r\n        localStorage.setItem(\"blogs\", JSON.stringify(updatedBlogs));\r\n        navigate(\"/blogs\"); // Redirect to blogs page after deletion\r\n      } catch (error) {\r\n        console.error(\"Error deleting blog:\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEditBlog = (_, updatedBlog) => {\r\n    try {\r\n      const blogs = JSON.parse(localStorage.getItem(\"blogs\") || \"[]\");\r\n      const updatedBlogs = blogs.map((b) =>\r\n        b.id === id ? { ...b, ...updatedBlog } : b\r\n      );\r\n      localStorage.setItem(\"blogs\", JSON.stringify(updatedBlogs));\r\n      setBlog((prev) => ({ ...prev, ...updatedBlog }));\r\n    } catch (error) {\r\n      console.error(\"Error updating blog:\", error);\r\n    }\r\n  };\r\n\r\n  const handleAddComment = (comment) => {\r\n    try {\r\n      const blogs = JSON.parse(localStorage.getItem(\"blogs\") || \"[]\");\r\n      const updatedBlogs = blogs.map((b) => {\r\n        if (b.id === id) {\r\n          return {\r\n            ...b,\r\n            comments: [...(b.comments || []), comment],\r\n          };\r\n        }\r\n        return b;\r\n      });\r\n      localStorage.setItem(\"blogs\", JSON.stringify(updatedBlogs));\r\n      setBlog((prev) => ({\r\n        ...prev,\r\n        comments: [...(prev.comments || []), comment],\r\n      }));\r\n    } catch (error) {\r\n      console.error(\"Error adding comment:\", error);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!blog) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\r\n        <Navbar\r\n          isAuthenticated={isAuthenticated}\r\n          setIsAuthenticated={setIsAuthenticated}\r\n        />\r\n        <div className=\"container mx-auto px-4 pt-24\">\r\n          <div className=\"glass-effect rounded-xl p-8 text-center\">\r\n            <h2 className=\"text-2xl font-bold text-gray-700 mb-4\">\r\n              Blog post not found\r\n            </h2>\r\n            <button\r\n              onClick={() => navigate(\"/blogs\")}\r\n              className=\"px-6 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors\"\r\n            >\r\n              Return to Blogs\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\r\n      <Navbar\r\n        isAuthenticated={isAuthenticated}\r\n        setIsAuthenticated={setIsAuthenticated}\r\n      />\r\n      <div className=\"container mx-auto px-4 pt-24\">\r\n        <BlogPost\r\n          {...blog}\r\n          isAuthenticated={isAuthenticated}\r\n          userRole={userRole}\r\n          currentUser={userEmail}\r\n          onDelete={() => handleDeleteBlog(blog.id)}\r\n          onEdit={handleEditBlog}\r\n          onAddComment={handleAddComment}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingleBlogPost;\r\n"],"names":["SingleBlogPost","isAuthenticated","userRole","userEmail","setIsAuthenticated","id","useParams","navigate","useNavigate","blog","setBlog","useState","isLoading","setIsLoading","useEffect","foundBlog","b","error","handleDeleteBlog","blogId","updatedBlogs","handleEditBlog","_","updatedBlog","prev","handleAddComment","comment","jsx","jsxs","Navbar","BlogPost"],"mappings":"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"}