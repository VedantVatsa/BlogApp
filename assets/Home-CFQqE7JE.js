import{j as e}from"./index-DpffgWme.js";import{b as l,L as S}from"./vendor-CGTneAp3.js";import{N as I}from"./Navbar-HHhRbH_r.js";import{R as M,B as D}from"./BlogPost-DHPnxQNY.js";const $=({isAuthenticated:n,setIsAuthenticated:k,userRole:f,userEmail:b})=>{const[i,d]=l.useState(()=>{const t=localStorage.getItem("blogs");return t?JSON.parse(t):[]}),[a,c]=l.useState({title:"",content:"",isValid:!1});l.useState("");const[p,C]=l.useState(""),[v,B]=l.useState(1),u=5,[x,g]=l.useState(!1),[y,m]=l.useState(null);l.useEffect(()=>{localStorage.setItem("blogs",JSON.stringify(i))},[i]);const h=t=>!(!t.title.trim()||!t.content||t.content.trim()==="<p><br></p>"),P=t=>{if(t.preventDefault(),m(null),!h(a)){m("Please fill in both title and content");return}try{const s={id:`${Date.now()}-${Math.random().toString(36).substring(2)}`,title:a.title,content:a.content,author:b,comments:[],createdAt:new Date().toISOString(),lastEdited:null};d(o=>[s,...o]),c({title:"",content:"",isValid:!1}),g(!1)}catch{m("Failed to create blog post. Please try again.")}},L=(t,r)=>{const s=[...i];Array.isArray(r)?s[t].comments=r:s[t].comments.push(r),d(s)},E=t=>{window.confirm("Are you sure you want to delete this blog post?")&&d(r=>r.filter((s,o)=>o!==t))},O=(t,r)=>{d(s=>{const o=[...s];return o[t]={...o[t],...r,lastEdited:new Date().toISOString()},o})},V=t=>{c(r=>({...r,content:t,isValid:h({...r,content:t})}))},j=i.filter(t=>t.title.toLowerCase().includes(p.toLowerCase())||t.content.toLowerCase().includes(p.toLowerCase())),w=v*u,A=w-u,N=j.slice(A,w);return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-radial from-gray-50 via-gray-100 to-gray-200",children:[e.jsx(I,{isAuthenticated:n,setIsAuthenticated:k}),e.jsxs("main",{className:"flex-1 container mx-auto px-4 pt-24 pb-8 max-w-7xl w-full",children:[" ",e.jsxs("div",{className:"glass-effect rounded-2xl p-8 mb-12 animate-fade-in-up",children:[e.jsx("h1",{className:"text-5xl font-display font-bold text-center bg-gradient-to-r from-primary-500 to-accent-500 text-transparent bg-clip-text mb-4",children:"Welcome to Pensieve"}),e.jsx("p",{className:"text-center text-gray-600 text-lg max-w-2xl mx-auto",children:"Where thoughts flow freely and stories come to life"}),e.jsxs("div",{className:"mt-8 relative",children:[e.jsx("input",{type:"text",placeholder:"Search stories...",value:p,onChange:t=>C(t.target.value),className:"input-modern pl-12"}),e.jsx("svg",{className:"w-6 h-6 text-gray-400 absolute left-4 top-1/2 transform -translate-y-1/2 animate-bounce-subtle"})]})]}),n&&f==="admin"&&e.jsxs("div",{className:"mb-12 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 blur-3xl -z-10"}),e.jsxs("div",{className:"glass-effect rounded-2xl p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Create New Story"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[y&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600",children:y}),e.jsx("div",{className:"group",children:e.jsx("input",{type:"text",placeholder:"Enter your title...",value:a.title,onChange:t=>c(r=>({...r,title:t.target.value,isValid:h({...r,title:t.target.value})})),className:`w-full px-6 py-4 bg-white/5 border-2 border-purple-500/20 rounded-xl \r
                             focus:border-purple-500/40 focus:ring-2 focus:ring-purple-500/20 \r
                             transition-all duration-300 text-lg font-display\r
                             placeholder:text-gray-400`,required:!0})}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-purple-500/20 to-pink-500/20 \r
                                rounded-xl blur opacity-0 group-hover:opacity-100 transition-opacity duration-300`}),e.jsx(M,{value:a.content,onChange:V})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{type:"button",onClick:()=>g(!x),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:x?"Hide Preview":"Show Preview"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{c({title:"",content:"",isValid:!1}),m(null),g(!1)},className:`px-6 py-3 rounded-xl border-2 border-gray-300 text-gray-600 \r
                               hover:border-gray-400 hover:text-gray-700 transition-all duration-300`,children:"Clear"}),e.jsx("button",{type:"submit",disabled:!a.isValid,className:`px-6 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600
                      text-white font-bold transition-all duration-300
                      ${a.isValid?"hover:from-purple-700 hover:to-pink-700 opacity-100":"opacity-50 cursor-not-allowed"}`,children:"Publish Post"})]})]})]}),x&&e.jsxs("div",{className:"mt-8 border-t border-gray-200 pt-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),e.jsxs("article",{className:"prose prose-lg max-w-none",children:[e.jsx("h1",{children:a.title}),e.jsx("div",{dangerouslySetInnerHTML:{__html:a.content}})]})]})]})]}),!n&&e.jsxs("div",{className:"mb-12 relative group",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-blue-500/30 via-purple-500/30 to-pink-500/30 blur-2xl -z-10 \r
                          group-hover:from-blue-600/40 group-hover:via-purple-600/40 group-hover:to-pink-600/40 transition-all duration-500`}),e.jsxs("div",{className:"glass-effect rounded-2xl p-8 relative overflow-hidden group-hover:scale-[1.01] transition-all duration-500",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-full blur-3xl transform translate-x-20 -translate-y-20"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Join Our Community"}),e.jsx("p",{className:"mt-2 text-gray-600 max-w-md",children:"Share your stories, engage with other writers, and be part of something special."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(S,{to:"/login",className:`btn-modern px-8 py-3 bg-gradient-to-r from-primary-500 to-accent-500 text-white rounded-xl\r
                             hover:from-primary-600 hover:to-accent-600 transform hover:-translate-y-0.5 transition-all duration-300\r
                             shadow-lg hover:shadow-xl hover:shadow-primary-500/20`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"Sign In"}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})}),e.jsx(S,{to:"/signup",className:`btn-modern px-8 py-3 border-2 border-primary-500 text-primary-600 rounded-xl\r
                             hover:bg-primary-50 transform hover:-translate-y-0.5 transition-all duration-300`,children:"Create Account"})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary-500/50 to-transparent"}),e.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 rounded-full bg-primary-500 animate-ping"}),e.jsx("div",{className:"absolute bottom-4 right-4 w-2 h-2 rounded-full bg-accent-500 animate-ping animation-delay-2000"})]})]}),e.jsx("div",{className:"space-y-6",children:N.length===0?e.jsx("p",{className:"text-gray-500 text-center",children:"No blog posts yet!"}):N.map((t,r)=>e.jsx(D,{index:r,id:t.id,...t,isAuthenticated:n,userRole:f,onAddComment:s=>L(r,s),onDelete:()=>E(r),onEdit:s=>O(r,s),currentUser:b},t.id||r))}),e.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:Array.from({length:Math.ceil(j.length/u)}).map((t,r)=>e.jsx("button",{onClick:()=>B(r+1),className:`px-3 py-1 rounded ${v===r+1?"bg-blue-500 text-white":"bg-gray-200"}`,children:r+1},r))})]})]})};export{$ as default};
