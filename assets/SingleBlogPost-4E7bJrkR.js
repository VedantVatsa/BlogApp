import{a as S,u as j,r as i,j as e}from"./index-DDbkNFXw.js";import{B}from"./BlogPost-u2W-tSfo.js";import{N as b}from"./Navbar-DJpI0oLh.js";const J=({isAuthenticated:n,userRole:f,userEmail:x,setIsAuthenticated:d})=>{const{id:a}=S(),m=j(),[c,g]=i.useState(null),[p,u]=i.useState(!0);i.useEffect(()=>{(async()=>{try{u(!0);const s=JSON.parse(localStorage.getItem("blogs")||"[]").find(o=>o.id===a);s&&g(s)}catch(r){console.error("Error loading blog:",r)}finally{u(!1)}})()},[a]);const y=t=>{if(window.confirm("Are you sure you want to delete this blog post?"))try{const s=JSON.parse(localStorage.getItem("blogs")||"[]").filter(o=>o.id!==t);localStorage.setItem("blogs",JSON.stringify(s)),m("/blogs")}catch(r){console.error("Error deleting blog:",r)}},h=(t,r)=>{try{const o=JSON.parse(localStorage.getItem("blogs")||"[]").map(l=>l.id===a?{...l,...r}:l);localStorage.setItem("blogs",JSON.stringify(o)),g(l=>({...l,...r}))}catch(s){console.error("Error updating blog:",s)}},N=t=>{try{const s=JSON.parse(localStorage.getItem("blogs")||"[]").map(o=>o.id===a?{...o,comments:[...o.comments||[],t]}:o);localStorage.setItem("blogs",JSON.stringify(s)),g(o=>({...o,comments:[...o.comments||[],t]}))}catch(r){console.error("Error adding comment:",r)}};return p?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):c?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx(b,{isAuthenticated:n,setIsAuthenticated:d}),e.jsx("div",{className:"container mx-auto px-4 pt-24",children:e.jsx(B,{...c,isAuthenticated:n,userRole:f,currentUser:x,onDelete:()=>y(c.id),onEdit:h,onAddComment:N})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx(b,{isAuthenticated:n,setIsAuthenticated:d}),e.jsx("div",{className:"container mx-auto px-4 pt-24",children:e.jsxs("div",{className:"glass-effect rounded-xl p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4",children:"Blog post not found"}),e.jsx("button",{onClick:()=>m("/blogs"),className:"px-6 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"Return to Blogs"})]})})]})};export{J as default};
//# sourceMappingURL=SingleBlogPost-4E7bJrkR.js.map
